<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:BNKaraoke.DJ.ViewModels"
        xmlns:models="using:BNKaraoke.DJ.Models"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="BNKaraoke.DJ.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="BNKaraoke DJ Console"
        Background="#121212" Foreground="#FFFFFF"
        FontFamily="Inter">
	<Window.Styles>
		<Style Selector="Button">
			<Setter Property="Background" Value="#1E90FF"/>
			<Setter Property="Foreground" Value="#FFFFFF"/>
			<Setter Property="CornerRadius" Value="4"/>
			<Setter Property="Padding" Value="8"/>
		</Style>
		<Style Selector="Button:pointerover /template/ ContentPresenter">
			<Setter Property="Background" Value="#06b6d4"/>
		</Style>
		<Style Selector="Button:disabled /template/ ContentPresenter">
			<Setter Property="Background" Value="#4B5563"/>
			<Setter Property="Opacity" Value="0.5"/>
		</Style>
		<Style Selector="ComboBox">
			<Setter Property="Background" Value="#374151"/>
			<Setter Property="Foreground" Value="#FFFFFF"/>
			<Setter Property="BorderBrush" Value="#4B5563"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="CornerRadius" Value="4"/>
			<Setter Property="Padding" Value="8"/>
		</Style>
		<Style Selector="TextBlock.header">
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Foreground" Value="#FFFFFF"/>
			<Setter Property="Background" Value="#1E90FF"/>
			<Setter Property="Padding" Value="5"/>
		</Style>
	</Window.Styles>
	<Grid>
		<!-- Header: Logo and Title on the left, Buttons on the right -->
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<Grid Grid.Row="0" Margin="0,10,0,0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<!-- Logo and Title (Left) -->
			<StackPanel Grid.Column="0" Orientation="Horizontal" Margin="10,0,0,0">
				<Image Source="/Assets/twosinger.png" Width="125" Height="62.5" HorizontalAlignment="Left"/>
				<TextBlock Text="BNKaraoke.com DJ Control Center" FontSize="20" VerticalAlignment="Center" Margin="10,0,0,0"/>
			</StackPanel>

			<!-- Event Selection and Check-In (Right) -->
			<StackPanel Grid.Column="2" Orientation="Horizontal" Margin="0,0,10,0" Spacing="10">
				<ComboBox ItemsSource="{Binding LiveEvents}"
                          SelectedItem="{Binding SelectedEvent, Mode=TwoWay}"
                          IsVisible="{Binding ShouldShowEventDropdown}"
                          Width="200">
					<ComboBox.ItemTemplate>
						<DataTemplate x:DataType="models:EventDto">
							<TextBlock Text="{Binding Description}"/>
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>
				<Button Name="JoinButton"
                        Content="{Binding CheckInButtonText}"
                        Command="{Binding ToggleCheckInCommand}"
                        IsVisible="{Binding IsLoggedIn}"
                        IsEnabled="{Binding CanJoinLiveEvent}"/>
				<Button Content="{Binding LoginButtonText}"
                        Command="{Binding ToggleLoginCommand}"/>
			</StackPanel>
		</Grid>

		<!-- Main layout: Queue on the left, Video and Settings on the right -->
		<Grid Grid.Row="1" Margin="0,10,0,0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="2*"/>
				<!-- Queue takes 2/3 of the width -->
				<ColumnDefinition Width="1*"/>
				<!-- Video/Settings takes 1/3 of the width -->
			</Grid.ColumnDefinitions>

			<!-- Queue List -->
			<Grid Grid.Column="0" Margin="10">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<!-- Event Name Header -->
					<RowDefinition Height="Auto"/>
					<!-- Column Headers -->
					<RowDefinition Height="*"/>
					<!-- Queue List -->
				</Grid.RowDefinitions>

				<!-- Event Name Header -->
				<TextBlock Grid.Row="0"
                           Text="{Binding SelectedEvent.Description}"
                           IsVisible="{Binding IsCheckedIn}"
                           FontSize="16"
                           FontWeight="Bold"
                           Margin="0,0,0,5"/>

				<!-- Column Headers -->
				<Grid Grid.Row="1" IsVisible="{Binding IsCheckedIn}">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="150"/>
						<ColumnDefinition Width="100"/>
						<ColumnDefinition Width="100"/>
						<ColumnDefinition Width="150"/>
					</Grid.ColumnDefinitions>
					<TextBlock Grid.Column="0" Text="Song" Margin="5" Classes="header"/>
					<TextBlock Grid.Column="1" Text="Artist" Margin="5" Classes="header"/>
					<TextBlock Grid.Column="2" Text="Requestor" Margin="5" Classes="header"/>
					<TextBlock Grid.Column="3" Text="Singers" Margin="5" Classes="header"/>
				</Grid>

				<!-- Queue List -->
				<ListBox Grid.Row="2" ItemsSource="{Binding Queue}" Background="#1E90FF">
					<ListBox.ItemTemplate>
						<DataTemplate x:DataType="models:EventQueueDto">
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="{Binding Song.Title}" Margin="5" Width="150"/>
								<TextBlock Text="{Binding Song.Artist}" Margin="5" Width="100"/>
								<TextBlock Text="{Binding RequestorDisplayName}" Margin="5" Width="100"/>
								<TextBlock Text="All Sing" Margin="5" Width="150"/>
							</StackPanel>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
				<!-- Default message when not checked in -->
				<Border Grid.Row="2" IsVisible="{Binding !IsCheckedIn}" Background="#1E90FF" Padding="10">
					<TextBlock Text="Queue Shows No Live Event Chosen"
                               Foreground="#FFFFFF"
                               FontSize="14"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
				</Border>
			</Grid>

			<!-- Video Playback and Settings -->
			<Grid Grid.Column="1">
				<Grid.RowDefinitions>
					<RowDefinition Height="2*"/>
					<RowDefinition Height="1*"/>
				</Grid.RowDefinitions>

				<!-- Video Playback Placeholder -->
				<Border Grid.Row="0" BorderBrush="#63B3ED" BorderThickness="1" Margin="10">
					<TextBlock Text="Video Playback Placeholder"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Foreground="#FFFFFF"/>
				</Border>

				<!-- Settings Panel -->
				<StackPanel Grid.Row="1" Margin="10" Background="#63B3ED">
					<TextBlock Text="Settings" FontSize="16" Margin="0,0,0,10"/>
					<TextBlock Text="Cache Size (GB)"/>
					<NumericUpDown Value="{Binding CacheSize}" Minimum="1" Maximum="50" Increment="1" Margin="0,5"/>
					<Button Content="Save Settings" Command="{Binding SaveSettingsCommand}" Margin="0,10"/>
				</StackPanel>
			</Grid>
		</Grid>
	</Grid>
</Window>